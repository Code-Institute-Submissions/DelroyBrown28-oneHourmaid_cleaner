<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talk to your cleaner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
        type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
        type="text/css">
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&family=Oswald:wght@200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css">

</head>

<body id="accountBody" background="{{ url_for('static', filename='images/sunset_bg_full.png') }}"
    style="background-repeat: no-repeat; background-position: center; background-size: cover;">


    <div class="top_contents_account">
        <h3 class="account_title">OneHourmaid</h3>
        <span class="cleaner_acc_tag">Confirm your request</span>
    </div>

    <form class="chat_wrap" method="POST" action="">
        <div class="col s12">
            <div class="row">
                <div class="input-field col s12">
                    <input type="text" id="chat_name" class="chat_name_input autocomplete">
                    <label for="chat_name">Name</label>
                </div>
            </div>
        </div>
        <div class="message_wrapper"></div>

        <div class="col s12">
            <div class="row">
                <div class="input-field col s12">
                    <input type="text" id="message" class="chat_message_input autocomplete">
                    <label for="message">Type your message here...</label>
                </div>
            </div>
        </div>
        <button class="send_message_btn" type="submit">Send!</button>
        <a href="{{ url_for('index_page') }}"><button class="send_message_btn">Exit!</button></a>
    </form>






    <script src="http://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"
        integrity="sha512-v8ng/uGxkge3d1IJuEo6dJP8JViyvms0cly9pnbfRxT6/31c3dRWxIiwGnMSWwZjHKOuY3EVmijs7k1jz/9bLA=="
        crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='javascript/script.js') }}"></script>

    <script>
        var socket = io.connect('http://127.0.0.1:5000/')
        // Broadcast a message
        socket.on('connect', function () {
            socket.emit('my event', {
                data: 'New user Connected'
            })
        })
        var form = $('form').on('submit', function (e) {
            e.preventDefault()
            var user_name = $('input#chat_name').val()
            var message = $('input#message').val()
            socket.emit('my event', {
                user: user_name,
                msg: message
            })
            // Empty the message field
            $('input#message').val('').focus()
        })
        // Capture message
        socket.on('my response', function (msg) {
            if (typeof msg.user !== 'undefined') {
                $('div.message_wrapper').append('<div class="user_bbl">' + msg.user + '</div><br><div class="msg_bbl">' + msg.msg + '</div>')
            }
            console.log(msg)
        })
    </script>


</body>

</html> 